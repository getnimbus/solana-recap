{"version":3,"file":"index-1U60lnae.js","sources":["../../node_modules/@wormhole-foundation/wormhole-connect/lib/index-1U60lnae.mjs"],"sourcesContent":["var m = Object.defineProperty;\nvar w = (c, e, t) => e in c ? m(c, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : c[e] = t;\nvar a = (c, e, t) => w(c, typeof e != \"symbol\" ? e + \"\" : e, t);\nimport { C as u } from \"./cosmwasm-DY1PMAJO.mjs\";\nimport { cz as g, bZ as l, u as h, bH as p, ai as f } from \"./index-DgePBEwv.mjs\";\nclass i {\n  constructor(e, t, s, r) {\n    a(this, \"network\");\n    a(this, \"chain\");\n    a(this, \"rpc\");\n    a(this, \"contracts\");\n    a(this, \"coreAddress\");\n    this.network = e, this.chain = t, this.rpc = s, this.contracts = r;\n    const n = this.contracts.coreBridge;\n    if (!n)\n      throw new Error(`Wormhole Token Bridge contract for domain ${t} not found`);\n    this.coreAddress = n;\n  }\n  getGuardianSet(e) {\n    throw new Error(\"Method not implemented.\");\n  }\n  getGuardianSetIndex() {\n    throw new Error(\"Method not implemented.\");\n  }\n  getMessageFee() {\n    throw new Error(\"Method not implemented.\");\n  }\n  static async fromRpc(e, t) {\n    const [s, r] = await u.chainFromRpc(e), n = t[r];\n    if (n.network !== s)\n      throw new Error(`Network mismatch: ${n.network} != ${s}`);\n    return new i(s, r, e, n.contracts);\n  }\n  async *publishMessage(e, t, s, r) {\n    throw new Error(\"Method not implemented.\");\n  }\n  async *verifyMessage(e, t) {\n    throw new Error(\"Not implemented.\");\n  }\n  async parseTransaction(e) {\n    const t = await this.rpc.getTx(e);\n    if (!t)\n      throw new Error(\"No transaction found for txid: \" + e);\n    return [i.parseWormholeMessageId(this.chain, this.coreAddress, t)];\n  }\n  async parseMessages(e) {\n    const t = await this.rpc.getTx(e);\n    if (!t)\n      throw new Error(\"No transaction found for txid: \" + e);\n    return [i.parseWormholeMessage(this.chain, this.coreAddress, t)];\n  }\n  static parseWormholeMessage(e, t, s) {\n    const r = s.events.filter((o) => o.type === \"wasm\" && o.attributes[0].key === \"_contract_address\" && o.attributes[0].value === t);\n    if (r.length === 0)\n      throw new Error(\"No wormhole message found in tx\");\n    r.length > 1 && console.error(`Expected single message, found ${r.length}`);\n    const [n] = r, d = Object.fromEntries(n.attributes.map((o) => [o.key.split(\".\")[1], o.value]));\n    return g(\"Uint8Array\", {\n      emitterChain: e,\n      emitterAddress: new l(h.decode(d.sender)),\n      sequence: BigInt(d.sequence),\n      guardianSet: 0,\n      // TODO: need to implement guardian set idx\n      timestamp: Number(d.block_time),\n      consistencyLevel: 0,\n      nonce: Number(d.nonce),\n      signatures: [],\n      payload: h.decode(d.message)\n    });\n  }\n  static parseWormholeMessageId(e, t, s) {\n    const r = i.parseWormholeMessage(e, t, s);\n    return {\n      chain: r.emitterChain,\n      emitter: r.emitterAddress,\n      sequence: r.sequence\n    };\n  }\n}\np(f, \"WormholeCore\", i);\nexport {\n  i as CosmwasmWormholeCore\n};\n"],"names":["m","w","c","t","a","i","r","n","u","o","d","g","l","h","p","f"],"mappings":"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","x_google_ignoreList":[0]}