const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CFG8Auhr.js","assets/Bridge.js","assets/index.js","assets/index.BvO5tclL.css","assets/pbkdf2-BTEK0Lcd.js","assets/index-D1fzB2pJ.js"])))=>i.map(i=>d[i]);
import{bu as pr}from"./index.js";import{B as Ot,D as B,F as ot,G as Ve,H as fr,I as kn,J as se,L as En,M as ae,n as xn,o as jn,p as In,N as An,r as Bn,s as ut,t as On,O as Je,w as $n,c as Cn,Q as We,R as gr,z as Mn,y as le,U as Ce,V as zn,X as xr,Y as $t,Z as jr,$ as Pn,a0 as Ct,a1 as Un}from"./Bridge.js";import{T as _n}from"./pbkdf2-BTEK0Lcd.js";var Nn=Object.defineProperty,Rn=(t,e,r)=>e in t?Nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ee=(t,e,r)=>Rn(t,typeof e!="symbol"?e+"":e,r);function J(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const lt=8192;function U(t){if(t.length<lt)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=lt){const n=t.slice(r,r+lt);e+=String.fromCharCode(...n)}return btoa(e)}function De(t){var e;const r=t.startsWith("0x")?t.slice(2):t,n=((e=(r.length%2===0?r:`0${r}}`).match(/.{2}/g))==null?void 0:e.map(i=>parseInt(i,16)))??[];return Uint8Array.from(n)}function me(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function Mt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Vn(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}class Ir{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){let e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){let e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=Vn(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}}function Dn(t,e){switch(e){case"base58":return Ve(t);case"base64":return U(t);case"hex":return me(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function qn(t,e){switch(e){case"base58":return ot(t);case"base64":return J(t);case"hex":return De(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Ar(t,e=["<",">"]){const[r,n]=e,i=[];let s="",a=0;for(let o=0;o<t.length;o++){const u=t[o];if(u===r&&a++,u===n&&a--,a===0&&u===","){i.push(s.trim()),s="";continue}s+=u}return i.push(s.trim()),i}class Br{constructor({size:e=1024,maxSize:r,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r||e,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return dt(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return dt(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return dt(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Mt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Dn(this.toBytes(),e)}}function dt(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Or=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},K=(t,e,r)=>(Or(t,e,"read from private field"),r?r.call(t):e.get(t)),et=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},tt=(t,e,r,n)=>(Or(t,e,"write to private field"),e.set(t,r),r),ye,xe,Ze,ie;const $r=class{constructor(t){et(this,ye,void 0),et(this,xe,void 0),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),tt(this,ye,t.write),tt(this,xe,t.serialize??((e,r)=>{const n=new Br({size:this.serializedSize(e)??void 0,...r});return K(this,ye).call(this,e,n),n.toBytes()})),this.validate=t.validate??(()=>{})}write(t,e){this.validate(t),K(this,ye).call(this,t,e)}serialize(t,e){return this.validate(t),new Wn(this,K(this,xe).call(this,t,e))}parse(t){const e=new Ir(t);return this.read(e)}transform({name:t,input:e,output:r}){return new $r({name:t??this.name,read:n=>r(this.read(n)),write:(n,i)=>K(this,ye).call(this,e(n),i),serializedSize:n=>this.serializedSize(e(n)),serialize:(n,i)=>K(this,xe).call(this,e(n),i),validate:n=>this.validate(e(n))})}};let G=$r;ye=new WeakMap;xe=new WeakMap;const Cr=Symbol.for("@mysten/serialized-bcs");function zt(t){return!!t&&typeof t=="object"&&t[Cr]===!0}class Wn{constructor(e,r){et(this,Ze,void 0),et(this,ie,void 0),tt(this,Ze,e),tt(this,ie,r)}get[Cr](){return!0}toBytes(){return K(this,ie)}toHex(){return me(K(this,ie))}toBase64(){return U(K(this,ie))}toBase58(){return Ve(K(this,ie))}parse(){return K(this,Ze).parse(K(this,ie))}}Ze=new WeakMap;ie=new WeakMap;function rt({size:t,...e}){return new G({...e,serializedSize:()=>t})}function ht({readMethod:t,writeMethod:e,...r}){return rt({...r,read:n=>n[t](),write:(n,i)=>i[e](n),validate:n=>{var i;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,n)}})}function pt({readMethod:t,writeMethod:e,...r}){return rt({...r,read:n=>n[t](),write:(n,i)=>i[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function Kn({serialize:t,...e}){const r=new G({...e,serialize:t,write:(n,i)=>{for(const s of r.serialize(n).toBytes())i.write8(s)}});return r}function Ln({toBytes:t,fromBytes:e,...r}){return new G({...r,read:n=>{const i=n.readULEB(),s=n.readBytes(i);return e(s)},write:(n,i)=>{const s=t(n);i.writeULEB(s.length);for(let a=0;a<s.length;a++)i.write8(s[a])},serialize:n=>{const i=t(n),s=Mt(i.length),a=new Uint8Array(s.length+i.length);return a.set(s,0),a.set(i,s.length),a},validate:n=>{var i;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(i=r.validate)==null||i.call(r,n)}})}function Gn(t){let e=null;function r(){return e||(e=t()),e}return new G({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,i)=>r().write(n,i),serialize:(n,i)=>r().serialize(n,i).toBytes()})}const c={u8(t){return ht({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return ht({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return ht({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return pt({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return pt({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return pt({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return rt({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t?.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return Kn({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Mt(e)),...t})},bytes(t,e){return rt({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{for(let i=0;i<t;i++)n.write8(r[i]??0)},...e,validate:r=>{var n;if((n=e?.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return Ln({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new G({name:`${e.name}[${t}]`,read:n=>{const i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(n);return i},write:(n,i)=>{for(const s of n)e.write(s,i)},...r,validate:n=>{var i;if((i=r?.validate)==null||i.call(r,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return c.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>"Some"in e?e.Some:null})},vector(t,e){return new G({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=t.read(r);return i},write:(r,n)=>{n.writeULEB(r.length);for(const i of r)t.write(i,n)},...e,validate:r=>{var n;if((n=e?.validate)==null||n.call(e,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new G({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let i=0;i<t.length;i++){const s=t[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},read:r=>{const n=[];for(const i of t)n.push(i.read(r));return n},write:(r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},...e,validate:r=>{var n;if((n=e?.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new G({name:t,serializedSize:i=>{let s=0;for(const[a,o]of n){const u=o.serializedSize(i[a]);if(u==null)return null;s+=u}return s},read:i=>{const s={};for(const[a,o]of n)s[a]=o.read(i);return s},write:(i,s)=>{for(const[a,o]of n)o.write(i[a],s)},...r,validate:i=>{var s;if((s=r?.validate)==null||s.call(r,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(t,e,r){const n=Object.entries(e);return new G({name:t,read:i=>{const s=i.readULEB(),[a,o]=n[s];return{[a]:o?.read(i)??!0}},write:(i,s)=>{const[a,o]=Object.entries(i)[0];for(let u=0;u<n.length;u++){const[l,d]=n[u];if(l===a){s.writeULEB(u),d?.write(o,s);return}}},...r,validate:i=>{var s;if((s=r?.validate)==null||s.call(r,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);const a=Object.keys(i);if(a.length!==1)throw new TypeError(`Expected object with one key, found ${a.length}`);const[o]=a;if(!Object.hasOwn(e,o))throw new TypeError(`Invalid enum variant ${o}`)}})},map(t,e){return c.vector(c.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[i,s]of r)n.set(i,s);return n}})},generic(t,e){return(...r)=>e(...r).transform({name:`${e.name}<${r.map(n=>n.name).join(", ")}>`,input:n=>n,output:n=>n})},lazy(t){return Gn(t)}},Fn=32,je=class{constructor(t){if(this.types=new Map,this.counter=0,t instanceof je){this.schema=t.schema,this.types=new Map(t.types);return}if(this.schema=t,this.registerAddressType(je.ADDRESS,t.addressLength,t.addressEncoding),this.registerVectorType(t.vectorType),t.types&&t.types.structs)for(let e of Object.keys(t.types.structs))this.registerStructType(e,t.types.structs[e]);if(t.types&&t.types.enums)for(let e of Object.keys(t.types.enums))this.registerEnumType(e,t.types.enums[e]);if(t.types&&t.types.aliases)for(let e of Object.keys(t.types.aliases))this.registerAlias(e,t.types.aliases[e]);t.withPrimitives!==!1&&Jn(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(t,e,r){if(typeof t=="string"||Array.isArray(t)){const{name:n,params:i}=this.parseTypeName(t);return this.getTypeInterface(n).encode(this,e,r,i)}if(typeof t=="object"){const n=this.tempKey();return new je(this).registerStructType(n,t).ser(n,e,r)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(t)}`)}de(t,e,r){if(typeof e=="string")if(r)e=qn(e,r);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof t=="string"||Array.isArray(t)){const{name:n,params:i}=this.parseTypeName(t);return this.getTypeInterface(n).decode(this,e,i)}if(typeof t=="object"){const n=new je(this),i=this.tempKey();return n.registerStructType(i,t).de(i,e,r)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(t)}`)}hasType(t){return this.types.has(t)}registerAlias(t,e){return this.types.set(t,e),this}registerType(t,e,r,n=()=>!0){const{name:i,params:s}=this.parseTypeName(t);return this.types.set(i,{encode(a,o,u,l){const d=s.reduce((f,g,m)=>Object.assign(f,{[g]:l[m]}),{});return this._encodeRaw.call(a,new Br(u),o,l,d)},decode(a,o,u){const l=s.reduce((d,f,g)=>Object.assign(d,{[f]:u[g]}),{});return this._decodeRaw.call(a,new Ir(o),u,l)},_encodeRaw(a,o,u,l){if(n(o))return e.call(this,a,o,u,l);throw new Error(`Validation failed for type ${i}, data: ${o}`)},_decodeRaw(a,o,u){return r.call(this,a,o,u)}}),this}registerBcsType(t,e){return this.registerType(t,(r,n,i)=>{const s=i.map(a=>new G({name:String(a),write:(o,u)=>{const{name:l,params:d}=this.parseTypeName(a),f=this.getTypeInterface(l),g=d.reduce((m,v,E)=>Object.assign(m,{[v]:i[E]}),{});return f._encodeRaw.call(this,u,o,d,g)},read:()=>{throw new Error("Not implemented")}}));return e(...s).write(n,r),r},(r,n)=>{const i=n.map(s=>new G({name:String(s),write:(a,o)=>{throw new Error("Not implemented")},read:a=>{const{name:o,params:u}=this.parseTypeName(s),l=this.getTypeInterface(o),d=u.reduce((f,g,m)=>Object.assign(f,{[g]:n[m]}),{});return l._decodeRaw.call(this,a,u,d)}}));return e(...i).read(r)}),this}registerAddressType(t,e,r="hex"){switch(r){case"base64":return this.registerType(t,function(n,i){return J(i).reduce((s,a)=>s.write8(a),n)},function(n){return U(n.readBytes(e))});case"hex":return this.registerType(t,function(n,i){return De(i).reduce((s,a)=>s.write8(a),n)},function(n){return me(n.readBytes(e))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(t){let{name:e,params:r}=this.parseTypeName(t);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+e);return this.registerType(t,function(n,i,s,a){return n.writeVec(i,(o,u)=>{let l=s[0];if(!l)throw new Error(`Incorrect number of type parameters passed a to vector '${t}'`);let{name:d,params:f}=this.parseTypeName(l);if(this.hasType(d))return this.getTypeInterface(d)._encodeRaw.call(this,o,u,f,a);if(!(d in a))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:g,params:m}=this.parseTypeName(a[d]);return this.getTypeInterface(g)._encodeRaw.call(this,o,u,m,a)})},function(n,i,s){return n.readVec(a=>{let o=i[0];if(!o)throw new Error(`Incorrect number of type parameters passed to a vector '${t}'`);let{name:u,params:l}=this.parseTypeName(o);if(this.hasType(u))return this.getTypeInterface(u)._decodeRaw.call(this,a,l,s);if(!(u in s))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:d,params:f}=this.parseTypeName(s[u]);return this.getTypeInterface(d)._decodeRaw.call(this,a,f,s)})})}registerStructType(t,e){for(let a in e){let o=this.tempKey(),u=e[a];!Array.isArray(u)&&typeof u!="string"&&(e[a]=o,this.registerStructType(o,u))}let r=Object.freeze(e),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(t);return this.registerType(t,function(a,o,u,l){if(!o||o.constructor!==Object)throw new Error(`Expected ${i} to be an Object, got: ${o}`);if(u.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${u.length}`);for(let d of n){if(!(d in o))throw new Error(`Struct ${i} requires field ${d}:${r[d]}`);const{name:f,params:g}=this.parseTypeName(r[d]);if(!s.includes(f))this.getTypeInterface(f)._encodeRaw.call(this,a,o[d],g,l);else{const m=s.indexOf(f);let{name:v,params:E}=this.parseTypeName(u[m]);if(this.hasType(v)){this.getTypeInterface(v)._encodeRaw.call(this,a,o[d],E,l);continue}if(!(v in l))throw new Error(`Unable to find a matching type definition for ${v} in ${i}; make sure you passed a generic`);let{name:C,params:q}=this.parseTypeName(l[v]);this.getTypeInterface(C)._encodeRaw.call(this,a,o[d],q,l)}}return a},function(a,o,u){if(o.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${o.length}`);let l={};for(let d of n){const{name:f,params:g}=this.parseTypeName(r[d]);if(!s.includes(f))l[d]=this.getTypeInterface(f)._decodeRaw.call(this,a,g,u);else{const m=s.indexOf(f);let{name:v,params:E}=this.parseTypeName(o[m]);if(this.hasType(v)){l[d]=this.getTypeInterface(v)._decodeRaw.call(this,a,E,u);continue}if(!(v in u))throw new Error(`Unable to find a matching type definition for ${v} in ${i}; make sure you passed a generic`);let{name:C,params:q}=this.parseTypeName(u[v]);l[d]=this.getTypeInterface(C)._decodeRaw.call(this,a,q,u)}}return l})}registerEnumType(t,e){for(let a in e){let o=this.tempKey(),u=e[a];u!==null&&!Array.isArray(u)&&typeof u!="string"&&(e[a]=o,this.registerStructType(o,u))}let r=Object.freeze(e),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(t);return this.registerType(t,function(a,o,u,l){if(!o)throw new Error(`Unable to write enum "${i}", missing data.
Received: "${o}"`);if(typeof o!="object")throw new Error(`Incorrect data passed into enum "${i}", expected object with properties: "${n.join(" | ")}".
Received: "${JSON.stringify(o)}"`);let d=Object.keys(o)[0];if(d===void 0)throw new Error(`Empty object passed as invariant of the enum "${i}"`);let f=n.indexOf(d);if(f===-1)throw new Error(`Unknown invariant of the enum "${i}", allowed values: "${n.join(" | ")}"; received "${d}"`);let g=n[f],m=r[g];if(a.write8(f),m===null)return a;let v=s.indexOf(m),E=v===-1?m:u[v];{let{name:C,params:q}=this.parseTypeName(E);return this.getTypeInterface(C)._encodeRaw.call(this,a,o[d],q,l)}},function(a,o,u){let l=a.readULEB(),d=n[l],f=r[d];if(l===-1)throw new Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${l}"`);if(f===null)return{[d]:!0};let g=s.indexOf(f),m=g===-1?f:o[g];{let{name:v,params:E}=this.parseTypeName(m);return{[d]:this.getTypeInterface(v)._decodeRaw.call(this,a,E,u)}}})}getTypeInterface(t){let e=this.types.get(t);if(typeof e=="string"){let r=[];for(;typeof e=="string";){if(r.includes(e))throw new Error(`Recursive definition found: ${r.join(" -> ")} -> ${e}`);r.push(e),e=this.types.get(e)}}if(e===void 0)throw new Error(`Type ${t} is not registered`);return e}parseTypeName(t){if(Array.isArray(t)){let[o,...u]=t;return{name:o,params:u}}if(typeof t!="string")throw new Error(`Illegal type passed as a name of the type: ${t}`);let[e,r]=this.schema.genericSeparators||["<",">"],n=t.indexOf(e),i=Array.from(t).reverse().indexOf(r);if(n===-1&&i===-1)return{name:t,params:[]};if(n===-1||i===-1)throw new Error(`Unclosed generic in name '${t}'`);let s=t.slice(0,n),a=Ar(t.slice(n+1,t.length-i-1),this.schema.genericSeparators);return{name:s,params:a}}};let x=je;x.U8="u8";x.U16="u16";x.U32="u32";x.U64="u64";x.U128="u128";x.U256="u256";x.BOOL="bool";x.VECTOR="vector";x.ADDRESS="address";x.STRING="string";x.HEX="hex-string";x.BASE58="base58-string";x.BASE64="base64-string";function Jn(t){t.registerType(x.U8,function(e,r){return e.write8(r)},function(e){return e.read8()},e=>e<256),t.registerType(x.U16,function(e,r){return e.write16(r)},function(e){return e.read16()},e=>e<65536),t.registerType(x.U32,function(e,r){return e.write32(r)},function(e){return e.read32()},e=>e<=4294967296n),t.registerType(x.U64,function(e,r){return e.write64(r)},function(e){return e.read64()}),t.registerType(x.U128,function(e,r){return e.write128(r)},function(e){return e.read128()}),t.registerType(x.U256,function(e,r){return e.write256(r)},function(e){return e.read256()}),t.registerType(x.BOOL,function(e,r){return e.write8(r)},function(e){return e.read8().toString(10)==="1"}),t.registerType(x.STRING,function(e,r){return e.writeVec(Array.from(r),(n,i)=>n.write8(i.charCodeAt(0)))},function(e){return e.readVec(r=>r.read8()).map(r=>String.fromCharCode(Number(r))).join("")},e=>!0),t.registerType(x.HEX,function(e,r){return e.writeVec(Array.from(De(r)),(n,i)=>n.write8(i))},function(e){let r=e.readVec(n=>n.read8());return me(new Uint8Array(r))}),t.registerType(x.BASE58,function(e,r){return e.writeVec(Array.from(ot(r)),(n,i)=>n.write8(i))},function(e){let r=e.readVec(n=>n.read8());return Ve(new Uint8Array(r))}),t.registerType(x.BASE64,function(e,r){return e.writeVec(Array.from(J(r)),(n,i)=>n.write8(i))},function(e){let r=e.readVec(n=>n.read8());return U(new Uint8Array(r))})}function Zn(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:Fn,addressEncoding:"hex"}}class Hn extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...a}=e,{path:o}=e,u=o.length===0?i:`At path: ${o.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function Xn(t){return V(t)&&typeof t[Symbol.iterator]=="function"}function V(t){return typeof t=="object"&&t!=null}function D(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Qn(t){const{done:e,value:r}=t.next();return e?void 0:r}function Yn(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:a}=r,{refinement:o,message:u=`Expected a value of type \`${a}\`${o?` with refinement \`${o}\``:""}, but received: \`${D(n)}\``}=t;return{value:n,type:a,refinement:o,key:i[i.length-1],path:i,branch:s,...t,message:u}}function*mr(t,e,r,n){Xn(t)||(t=[t]);for(const i of t){const s=Yn(i,e,r,n);s&&(yield s)}}function*Pt(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:a=!1}=r,o={path:n,branch:i};if(s&&(t=e.coercer(t,o),a&&e.type!=="type"&&V(e.schema)&&V(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let u="valid";for(const l of e.validator(t,o))l.explanation=r.message,u="not_valid",yield[l,void 0];for(let[l,d,f]of e.entries(t,o)){const g=Pt(d,f,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,d],coerce:s,mask:a,message:r.message});for(const m of g)m[0]?(u=m[0].refinement!=null?"not_refined":"not_valid",yield[m[0],void 0]):s&&(d=m[1],l===void 0?t=d:t instanceof Map?t.set(l,d):t instanceof Set?t.add(d):V(t)&&(d!==void 0||l in t)&&(t[l]=d))}if(u!=="not_valid")for(const l of e.refiner(t,o))l.explanation=r.message,u="not_refined",yield[l,void 0];u==="valid"&&(yield[void 0,t])}class X{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:a=u=>u,entries:o=function*(){}}=e;this.type=r,this.schema=n,this.entries=o,this.coercer=a,i?this.validator=(u,l)=>{const d=i(u,l);return mr(d,l,this,u)}:this.validator=()=>[],s?this.refiner=(u,l)=>{const d=s(u,l);return mr(d,l,this,u)}:this.refiner=()=>[]}assert(e,r){return yt(e,this,r)}create(e,r){return Mr(e,this,r)}is(e){return _(e,this)}mask(e,r){return zr(e,this,r)}validate(e,r={}){return qe(e,this,r)}}function yt(t,e,r){const n=qe(t,e,{message:r});if(n[0])throw n[0]}function Mr(t,e,r){const n=qe(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function zr(t,e,r){const n=qe(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function _(t,e){return!qe(t,e)[0]}function qe(t,e,r={}){const n=Pt(t,e,r),i=Qn(n);return i[0]?[new Hn(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function Me(...t){const e=t[0].type==="type",r=t.map(i=>i.schema),n=Object.assign({},...r);return e?ti(n):p(n)}function N(t,e){return new X({type:t,schema:null,validator:e})}function wt(){return N("any",()=>!0)}function S(t){return new X({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${D(e)}`}})}function ei(){return N("bigint",t=>typeof t=="bigint")}function M(){return N("boolean",t=>typeof t=="boolean")}function H(){return N("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${D(t)}`)}function w(t){const e=D(t),r=typeof t;return new X({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${D(n)}`}})}function Pr(){return N("never",()=>!1)}function A(t){return new X({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function fe(){return N("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${D(t)}`)}function p(t){const e=t?Object.keys(t):[],r=Pr();return new X({type:"object",schema:t||null,*entries(n){if(t&&V(n)){const i=new Set(Object.keys(n));for(const s of e)i.delete(s),yield[s,n[s],t[s]];for(const s of i)yield[s,n[s],r]}},validator(n){return V(n)||`Expected an object, but received: ${D(n)}`},coercer(n){return V(n)?{...n}:n}})}function y(t){return new X({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function Z(t,e){return new X({type:"record",schema:null,*entries(r){if(V(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return V(r)||`Expected an object, but received: ${D(r)}`}})}function h(){return N("string",t=>typeof t=="string"||`Expected a string, but received: ${D(t)}`)}function Ur(t){const e=Pr();return new X({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${D(r)}`}})}function ti(t){const e=Object.keys(t);return new X({type:"type",schema:t,*entries(r){if(V(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return V(r)||`Expected an object, but received: ${D(r)}`},coercer(r){return V(r)?{...r}:r}})}function O(t){const e=t.map(r=>r.type).join(" | ");return new X({type:"union",schema:null,coercer(r){for(const n of t){const[i,s]=n.validate(r,{coerce:!0});if(!i)return s}return r},validator(r,n){const i=[];for(const s of t){const[...a]=Pt(r,s,n),[o]=a;if(o[0])for(const[u]of a)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${D(r)}`,...i]}})}function _r(){return N("unknown",()=>!0)}/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function Nr(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function ri(t){const e=Nr(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}const ni=t=>Nr(`mnemonic${t}`);function ii(t,e=""){return _n($t,ri(t).nfkd,ni(e),{c:2048,dkLen:64})}const si="0.50.1",ai="1.19.0",oi={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class Rr extends Error{}class Vr extends Rr{constructor(e,r){super(e),this.code=r,this.type=oi[r]??"ServerError"}}class ci extends Rr{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var Ut=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},j=(t,e,r)=>(Ut(t,e,"read from private field"),r?r.call(t):e.get(t)),ne=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},be=(t,e,r,n)=>(Ut(t,e,"write to private field"),e.set(t,r),r),ui=(t,e,r,n)=>({set _(i){be(t,e,i)},get _(){return j(t,e,n)}}),Dr=(t,e,r)=>(Ut(t,e,"access private method"),r),de,Oe,Y,pe,ze,ve,bt,qr,_t,Wr;function li(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const di={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class hi{constructor(e,r={}){if(ne(this,bt),ne(this,_t),ne(this,de,0),ne(this,Oe,0),ne(this,Y,null),ne(this,pe,null),ne(this,ze,new Set),ne(this,ve,new Map),this.endpoint=e,this.options={...di,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=li(this.endpoint))}async makeRequest(e,r){const n=await Dr(this,bt,qr).call(this);return new Promise((i,s)=>{be(this,de,j(this,de)+1),j(this,ve).set(j(this,de),{resolve:i,reject:s,timeout:setTimeout(()=>{j(this,ve).delete(j(this,de)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:j(this,de),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new Vr(i.message,i.code);return s})}async subscribe(e){const r=new pi(e);return j(this,ze).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}de=new WeakMap;Oe=new WeakMap;Y=new WeakMap;pe=new WeakMap;ze=new WeakMap;ve=new WeakMap;bt=new WeakSet;qr=function(){return j(this,pe)?j(this,pe):(be(this,pe,new Promise(t=>{var e;(e=j(this,Y))==null||e.close(),be(this,Y,new this.options.WebSocketConstructor(this.endpoint)),j(this,Y).addEventListener("open",()=>{be(this,Oe,0),t(j(this,Y))}),j(this,Y).addEventListener("close",()=>{ui(this,Oe)._++,j(this,Oe)<=this.options.maxReconnects&&setTimeout(()=>{Dr(this,_t,Wr).call(this)},this.options.reconnectTimeout)}),j(this,Y).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(i){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:i}));return}if("id"in n&&n.id!=null&&j(this,ve).has(n.id)){const{resolve:i,timeout:s}=j(this,ve).get(n.id);clearTimeout(s),i(n)}else if("params"in n){const{params:i}=n;j(this,ze).forEach(s=>{s.subscriptionId===i.subscription&&i.subscription===s.subscriptionId&&s.onMessage(i.result)})}})})),j(this,pe))};_t=new WeakSet;Wr=async function(){var t;return(t=j(this,Y))==null||t.close(),be(this,pe,null),Promise.allSettled([...j(this,ze)].map(e=>e.subscribe(this)))};class pi{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}}var Nt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},R=(t,e,r)=>(Nt(t,e,"read from private field"),r?r.call(t):e.get(t)),Ke=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},vt=(t,e,r,n)=>(Nt(t,e,"write to private field"),e.set(t,r),r),fi=(t,e,r)=>(Nt(t,e,"access private method"),r),Ie,L,$e,St,Kr;class gi{constructor(e){Ke(this,St),Ke(this,Ie,0),Ke(this,L,void 0),Ke(this,$e,void 0),vt(this,L,e)}fetch(e,r){const n=R(this,L).fetch??globalThis.fetch;if(!this.fetch)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var r,n;vt(this,Ie,R(this,Ie)+1);const i=await this.fetch(((r=R(this,L).rpc)==null?void 0:r.url)??R(this,L).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":si,"Client-Target-Api-Version":ai,...(n=R(this,L).rpc)==null?void 0:n.headers},body:JSON.stringify({jsonrpc:"2.0",id:R(this,Ie),method:e.method,params:e.params})});if(!i.ok)throw new ci(`Unexpected status code: ${i.status}`,i.status,i.statusText);const s=await i.json();if("error"in s&&s.error!=null)throw new Vr(s.error.message,s.error.code);return s.result}async subscribe(e){const r=await fi(this,St,Kr).call(this).subscribe(e);return async()=>!!await r()}}Ie=new WeakMap;L=new WeakMap;$e=new WeakMap;St=new WeakSet;Kr=function(){var t;if(!R(this,$e)){const e=R(this,L).WebSocketConstructor??globalThis.WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");vt(this,$e,new hi(((t=R(this,L).websocket)==null?void 0:t.url)??R(this,L).url,{WebSocketConstructor:e,...R(this,L).websocket}))}return R(this,$e)};const mi=/^vector<(.+)>$/,yi=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class ee{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(mi);if(n)return{vector:ee.parseFromStr(n[1],r)};const i=e.match(yi);if(i)return{struct:{address:r?B(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:ee.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Ar(e).map(n=>ee.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ee.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(ee.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}const k=new x({...Zn(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function Lr(t){return c.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function wi(t){return c.enum("Option",{None:null,Some:t})}function Rt(t){return t.transform({input:e=>({[e.kind]:e}),output:e=>{const r=Object.keys(e)[0];return{kind:r,...e[r]}}})}const F=c.bytes(Ot).transform({input:t=>typeof t=="string"?De(B(t)):t,output:t=>B(me(t))}),Vt=c.vector(c.u8()).transform({name:"ObjectDigest",input:t=>ot(t),output:t=>Ve(new Uint8Array(t))}),Pe=c.struct("SuiObjectRef",{objectId:F,version:c.u64(),digest:Vt}),Dt=c.struct("SharedObjectRef",{objectId:F,initialSharedVersion:c.u64(),mutable:c.bool()}),nt=c.enum("ObjectArg",{ImmOrOwned:Pe,Shared:Dt,Receiving:Pe}),qt=c.enum("CallArg",{Pure:c.vector(c.u8()),Object:nt,ObjVec:c.vector(nt)}),ke=c.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:c.lazy(()=>ke),struct:c.lazy(()=>Jt),u16:null,u32:null,u256:null}),W=Rt(c.enum("Argument",{GasCoin:null,Input:c.struct("Input",{index:c.u16()}),Result:c.struct("Result",{index:c.u16()}),NestedResult:c.struct("NestedResult",{index:c.u16(),resultIndex:c.u16()})})),Wt=c.struct("ProgrammableMoveCall",{package:F,module:c.string(),function:c.string(),type_arguments:c.vector(ke),arguments:c.vector(W)}).transform({input:t=>{const[e,r,n]=t.target.split("::"),i=t.typeArguments.map(s=>ee.parseFromStr(s,!0));return{package:B(e),module:r,function:n,type_arguments:i,arguments:t.arguments}},output:t=>({target:[t.package,t.module,t.function].join("::"),arguments:t.arguments,typeArguments:t.type_arguments.map(ee.tagToString)})}),Kt=Rt(c.enum("Transaction",{MoveCall:Wt,TransferObjects:c.struct("TransferObjects",{objects:c.vector(W),address:W}),SplitCoins:c.struct("SplitCoins",{coin:W,amounts:c.vector(W)}),MergeCoins:c.struct("MergeCoins",{destination:W,sources:c.vector(W)}),Publish:c.struct("Publish",{modules:c.vector(c.vector(c.u8())),dependencies:c.vector(F)}),MakeMoveVec:c.struct("MakeMoveVec",{type:wi(ke),objects:c.vector(W)}),Upgrade:c.struct("Upgrade",{modules:c.vector(c.vector(c.u8())),dependencies:c.vector(F),packageId:F,ticket:W})})),Lt=c.struct("ProgrammableTransaction",{inputs:c.vector(qt),transactions:c.vector(Kt)}),Gt=c.enum("TransactionKind",{ProgrammableTransaction:Lt,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Ft=c.enum("TransactionExpiration",{None:null,Epoch:Lr()}),Jt=c.struct("StructTag",{address:F,module:c.string(),name:c.string(),typeParams:c.vector(ke)}),Zt=c.struct("GasData",{payment:c.vector(Pe),owner:F,price:c.u64(),budget:c.u64()}),Ht=c.struct("TransactionDataV1",{kind:Gt,sender:F,gasData:Zt,expiration:Ft}),Xt=c.enum("TransactionData",{V1:Ht}),bi=c.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),vi=c.enum("IntentVersion",{V0:null}),Si=c.enum("AppId",{Sui:null}),Ti=c.struct("Intent",{scope:bi,version:vi,appId:Si}),ki=c.generic(["T"],t=>c.struct("IntentMessage<T>",{intent:Ti,value:t})),Qt=c.enum("CompressedSignature",{ED25519:c.fixedArray(64,c.u8()),Secp256k1:c.fixedArray(64,c.u8()),Secp256r1:c.fixedArray(64,c.u8()),ZkLogin:c.vector(c.u8())}),Yt=c.enum("PublicKey",{ED25519:c.fixedArray(32,c.u8()),Secp256k1:c.fixedArray(33,c.u8()),Secp256r1:c.fixedArray(33,c.u8()),ZkLogin:c.vector(c.u8())}),er=c.struct("MultiSigPkMap",{pubKey:Yt,weight:c.u8()}),tr=c.struct("MultiSigPublicKey",{pk_map:c.vector(er),threshold:c.u16()}),Gr=c.struct("MultiSig",{sigs:c.vector(Qt),bitmap:c.u16(),multisig_pk:tr}),Ei=c.vector(c.u8()).transform({input:t=>typeof t=="string"?J(t):t,output:t=>U(new Uint8Array(t))}),Fr=c.struct("SenderSignedTransaction",{intentMessage:ki(Xt),txSignatures:c.vector(Ei)}),Jr=c.vector(Fr,{name:"SenderSignedData"}),I={...c,U8:c.u8(),U16:c.u16(),U32:c.u32(),U64:c.u64(),U128:c.u128(),U256:c.u256(),ULEB128:c.uleb128(),Bool:c.bool(),String:c.string(),Address:F,Argument:W,CallArg:qt,CompressedSignature:Qt,GasData:Zt,MultiSig:Gr,MultiSigPkMap:er,MultiSigPublicKey:tr,ObjectArg:nt,ObjectDigest:Vt,ProgrammableMoveCall:Wt,ProgrammableTransaction:Lt,PublicKey:Yt,SenderSignedData:Jr,SenderSignedTransaction:Fr,SharedObjectRef:Dt,StructTag:Jt,SuiObjectRef:Pe,Transaction:Kt,TransactionData:Xt,TransactionDataV1:Ht,TransactionExpiration:Ft,TransactionKind:Gt,TypeTag:ke,ser:k.ser.bind(k),de:k.de.bind(k),getTypeInterface:k.getTypeInterface.bind(k),hasType:k.hasType.bind(k),parseTypeName:k.parseTypeName.bind(k),registerAddressType:k.registerAddressType.bind(k),registerAlias:k.registerAlias.bind(k),registerBcsType:k.registerBcsType.bind(k),registerEnumType:k.registerEnumType.bind(k),registerStructType:k.registerStructType.bind(k),registerType:k.registerType.bind(k),types:k.types};k.registerBcsType("utf8string",()=>c.string({name:"utf8string"}));k.registerBcsType("unsafe_u64",()=>Lr());k.registerBcsType("enumKind",t=>Rt(t));[F,W,qt,Qt,Zt,Gr,er,tr,nt,Vt,Wt,Lt,Yt,Jr,Dt,Jt,Pe,Kt,Xt,Ht,Ft,Gt,ke].forEach(t=>{k.registerBcsType(t.name,()=>t)});const rr=O([p({AddressOwner:h()}),p({ObjectOwner:h()}),p({Shared:p({initial_shared_version:A(h())})}),w("Immutable")]);N("SuiJsonValue",()=>!0);const xi=O([p({u32:h()}),p({u64:h()}),p({f64:h()})]);p({attributes:Z(h(),A(xi)),featureFlags:Z(h(),M()),maxSupportedProtocolVersion:h(),minSupportedProtocolVersion:h(),protocolVersion:h()});O([h(),w("package")]);const oe=p({digest:h(),objectId:h(),version:O([fe(),h(),ei()])});p({owner:rr,reference:oe});p({objectId:h(),sequenceNumber:h()});p({payment:S(oe),owner:h(),price:h(),budget:h()});const ji=Me(oe,p({type:h(),owner:rr,previousTransaction:h()})),Ii=Z(h(),wt()),Ai=Z(h(),_r()),Bi=p({type:h(),fields:Ii,hasPublicTransfer:M()}),Oi=p({disassembled:Ai}),$i=O([Me(Bi,p({dataType:w("moveObject")})),Me(Oi,p({dataType:w("package")}))]),Ci=p({type:h(),hasPublicTransfer:M(),version:h(),bcsBytes:h()}),Mi=p({id:h(),moduleMap:Z(h(),h())}),zi=O([Me(Ci,p({dataType:w("moveObject")})),Me(Mi,p({dataType:w("package")}))]);BigInt(1e9);const Zr=p({code:h(),error:y(h()),object_id:y(h()),parent_object_id:y(h()),version:y(h()),digest:y(h())}),Pi=p({data:A(y(Z(h(),h()))),error:A(y(Zr))}),Ui=O([Pi,y(Z(h(),h()))]),Hr=p({objectId:h(),version:h(),digest:h(),type:A(y(h())),content:A(y($i)),bcs:A(y(zi)),owner:A(y(rr)),previousTransaction:A(y(h())),storageRebate:A(y(h())),display:A(y(Ui))});p({showType:A(y(M())),showContent:A(y(M())),showBcs:A(y(M())),showOwner:A(y(M())),showPreviousTransaction:A(y(M())),showStorageRebate:A(y(M())),showDisplay:A(y(M()))});O([w("Exists"),w("notExists"),w("Deleted")]);S(ji);const _i=p({data:A(y(Hr)),error:A(y(Zr))});function Ni(t){return t.data}function Ri(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const e=t.error;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function yr(t){if("reference"in t)return t.reference;const e=Ni(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:Ri(t)}p({objectId:h(),atCheckpoint:y(fe())});p({data:S(_i),nextCursor:y(A(h())),hasNextPage:M()});O([p({details:Hr,status:w("VersionFound")}),p({details:h(),status:w("ObjectNotExists")}),p({details:oe,status:w("ObjectDeleted")}),p({details:Ur([h(),fe()]),status:w("VersionNotFound")}),p({details:p({asked_version:fe(),latest_version:fe(),object_id:h()}),status:w("VersionTooHigh")})]);const Vi=O([h(),p({Object:h()})]);S(Vi);const Di=p({address:h(),name:h()}),qi=O([w("Private"),w("Public"),w("Friend")]),nr=p({abilities:S(h())}),Wi=p({constraints:nr,isPhantom:M()}),Ki=p({TypeParameter:fe()}),ft=Ur([p({module:h(),package:h(),function:h()}),h()]);p({rank3Days:S(ft),rank7Days:S(ft),rank30Days:S(ft)});function Xr(t){if(!t)return!1;if(typeof t=="string"||_(t,Ki)||Qr(t))return!0;if(typeof t!="object")return!1;const e=t;return!!(_(e.Reference,Se)||_(e.MutableReference,Se)||_(e.Vector,Se))}const Se=N("SuiMoveNormalizedType",Xr);function Qr(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.Struct||typeof e.Struct!="object")return!1;const r=e.Struct;return!(typeof r.address!="string"||typeof r.module!="string"||typeof r.name!="string"||!Array.isArray(r.typeArguments)||!r.typeArguments.every(n=>Xr(n)))}N("SuiMoveNormalizedStructType",Qr);const Li=p({visibility:qi,isEntry:M(),typeParameters:S(nr),parameters:S(Se),return:S(Se)}),Gi=p({name:h(),type:Se}),Fi=p({abilities:nr,typeParameters:S(Wi),fields:S(Gi)}),Ji=p({fileFormatVersion:fe(),address:h(),name:h(),friends:S(Di),structs:Z(h(),Fi),exposedFunctions:Z(h(),Li)});Z(h(),Ji);function Tt(t){return typeof t=="object"&&"MutableReference"in t?t.MutableReference:void 0}function Yr(t){return typeof t=="object"&&"Reference"in t?t.Reference:void 0}function ir(t){if(typeof t=="object"&&"Struct"in t)return t;const e=Yr(t),r=Tt(t);if(typeof e=="object"&&"Struct"in e)return e;if(typeof r=="object"&&"Struct"in r)return r}const Zi=O([p({ImmOrOwned:oe}),p({Shared:p({objectId:h(),initialSharedVersion:O([H(),h()]),mutable:M()})}),p({Receiving:oe})]),it=p({Pure:S(H())}),kt=p({Object:Zi}),st=O([it,kt]);function Hi(t,e){return{Pure:Array.from(t instanceof Uint8Array?t:zt(t)?t.toBytes():I.ser(e,t,{maxSize:1/0}).toBytes())}}const P={Pure:Hi,ObjectRef({objectId:t,digest:e,version:r}){return{Object:{ImmOrOwned:{digest:e,version:r,objectId:B(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{Object:{Shared:{mutable:e,initialSharedVersion:r,objectId:B(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{Object:{Receiving:{digest:e,version:r,objectId:B(t)}}}}};function wr(t){return typeof t=="string"?B(t):"ImmOrOwned"in t.Object?B(t.Object.ImmOrOwned.objectId):"Receiving"in t.Object?B(t.Object.Receiving.objectId):B(t.Object.Shared.objectId)}function Xi(t){return typeof t=="object"&&"Object"in t&&"Shared"in t.Object?t.Object.Shared:void 0}function Qi(t){var e;return((e=Xi(t))==null?void 0:e.mutable)??!1}function Yi(t){function e(r,n){return t(r,n)}return e.u8=r=>t(I.U8.serialize(r)),e.u16=r=>t(I.U16.serialize(r)),e.u32=r=>t(I.U32.serialize(r)),e.u64=r=>t(I.U64.serialize(r)),e.u128=r=>t(I.U128.serialize(r)),e.u256=r=>t(I.U256.serialize(r)),e.bool=r=>t(I.Bool.serialize(r)),e.string=r=>t(I.String.serialize(r)),e.address=r=>t(I.Address.serialize(r)),e.id=e.address,e}const es="object",ts="ID",rs="ascii",ns="String",is="string",ss="String",as="option",os="Option",cs={address:Pn,module:es,name:ts},us={address:Ct,module:rs,name:ns},ls={address:Ct,module:is,name:ss},ds={address:Ct,module:as,name:os},Le=(t,e)=>t.address===e.address&&t.module===e.module&&t.name===e.name;function hs(t){var e;const r=(e=ir(t))==null?void 0:e.Struct;return r?.address==="0x2"&&r?.module==="tx_context"&&r?.name==="TxContext"}function gt(t,e){if(!(typeof e>"u")&&typeof e!==t)throw new Error(`Expect ${e} to be ${t}, received ${typeof e}`)}const ps=["Address","Bool","U8","U16","U32","U64","U128","U256"];function Et(t,e){if(typeof t=="string"&&ps.includes(t)){if(t in["U8","U16","U32","U64","U128","U256"])gt("number",e);else if(t==="Bool")gt("boolean",e);else if(t==="Address"&&(gt("string",e),e&&!se(e)))throw new Error("Invalid Sui Address");return t.toLowerCase()}else if(typeof t=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((e===void 0||typeof e=="string")&&t.Vector==="U8")return"string";if(e!==void 0&&!Array.isArray(e))throw new Error(`Expect ${e} to be a array, received ${typeof e}`);const r=Et(t.Vector,e?e[0]:void 0);return r===void 0?void 0:`vector<${r}>`}if("Struct"in t){if(Le(t.Struct,us))return"string";if(Le(t.Struct,ls))return"utf8string";if(Le(t.Struct,cs))return"address";if(Le(t.Struct,ds)){const r={Vector:t.Struct.typeArguments[0]};return Et(r,e)}}}function fs(t,e){const r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Ce(n,{dkLen:32})}function z(t,e){return Mr(t,e)}const gs=t=>O([p({None:O([w(!0),w(null)])}),p({Some:t})]),Ue=O([p({kind:w("Input"),index:H(),value:y(wt()),type:y(w("object"))}),p({kind:w("Input"),index:H(),value:y(wt()),type:w("pure")})]),ms=[Ue,p({kind:w("GasCoin")}),p({kind:w("Result"),index:H()}),p({kind:w("NestedResult"),index:H(),resultIndex:H()})],re=O([...ms]),en=p({kind:w("MoveCall"),target:N("target",h().validator),typeArguments:S(h()),arguments:S(re)}),tn=p({kind:w("TransferObjects"),objects:S(re),address:re}),rn=p({kind:w("SplitCoins"),coin:re,amounts:S(re)}),nn=p({kind:w("MergeCoins"),destination:re,sources:S(re)}),sn=p({kind:w("MakeMoveVec"),type:y(gs(Z(h(),_r()))),objects:S(re)}),an=p({kind:w("Publish"),modules:S(S(H())),dependencies:S(h())}),on=p({kind:w("Upgrade"),modules:S(S(H())),dependencies:S(h()),packageId:h(),ticket:re}),ys=[en,tn,rn,nn,an,on,sn],ws=O([...ys]),ue={MoveCall(t){return z({kind:"MoveCall",target:t.target,arguments:t.arguments??[],typeArguments:t.typeArguments??[]},en)},TransferObjects(t,e){return e.kind==="Input"&&e.type==="pure"&&typeof e.value!="object"&&(e.value=P.Pure(I.Address.serialize(e.value))),z({kind:"TransferObjects",objects:t,address:e},tn)},SplitCoins(t,e){return e.forEach(r=>{r.kind==="Input"&&r.type==="pure"&&typeof r.value!="object"&&(r.value=P.Pure(I.U64.serialize(r.value)))}),z({kind:"SplitCoins",coin:t,amounts:e},rn)},MergeCoins(t,e){return z({kind:"MergeCoins",destination:t,sources:e},nn)},Publish({modules:t,dependencies:e}){return z({kind:"Publish",modules:t.map(r=>typeof r=="string"?Array.from(J(r)):r),dependencies:e.map(r=>ae(r))},an)},Upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return z({kind:"Upgrade",modules:t.map(i=>typeof i=="string"?Array.from(J(i)):i),dependencies:e.map(i=>ae(i)),packageId:r,ticket:n},on)},MakeMoveVec({type:t,objects:e}){return z({kind:"MakeMoveVec",type:t?{Some:ee.parseFromStr(t)}:{None:null},objects:e},sn)}},bs=y(A(O([p({Epoch:H()}),p({None:O([w(!0),w(null)])})]))),br=N("StringEncodedBigint",t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}),vs=p({budget:y(br),price:y(br),payment:y(S(oe)),owner:y(h())}),Ge=p({version:w(1),sender:y(h()),expiration:bs,gasConfig:vs,inputs:S(Ue),transactions:S(ws)});function vr(t){return B(t).replace("0x","")}class te{constructor(e){this.version=1,this.sender=e?.sender,this.expiration=e?.expiration,this.gasConfig=e?.gasConfig??{},this.inputs=e?.inputs??[],this.transactions=e?.transactions??[]}static fromKindBytes(e){const r=I.TransactionKind.parse(e),n="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!n)throw new Error("Unable to deserialize from bytes.");const i=z({version:1,gasConfig:{},inputs:n.inputs.map((s,a)=>z({kind:"Input",value:s,index:a,type:_(s,it)?"pure":"object"},Ue)),transactions:n.transactions},Ge);return te.restore(i)}static fromBytes(e){var r;const n=I.TransactionData.parse(e),i=n?.V1,s="ProgrammableTransaction"in i.kind?(r=i?.kind)==null?void 0:r.ProgrammableTransaction:null;if(!i||!s)throw new Error("Unable to deserialize from bytes.");const a=z({version:1,sender:i.sender,expiration:i.expiration,gasConfig:i.gasData,inputs:s.inputs.map((o,u)=>z({kind:"Input",value:o,index:u,type:_(o,it)?"pure":"object"},Ue)),transactions:s.transactions},Ge);return te.restore(a)}static restore(e){yt(e,Ge);const r=new te;return Object.assign(r,e),r}static getDigestFromBytes(e){const r=fs("TransactionData",e);return Ve(r)}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const i=this.inputs.map(d=>(yt(d.value,st),d.value)),s={ProgrammableTransaction:{inputs:i,transactions:this.transactions}};if(n)return I.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=r?.expiration??this.expiration,o=r?.sender??this.sender,u={...this.gasConfig,...r?.gasConfig};if(!o)throw new Error("Missing transaction sender");if(!u.budget)throw new Error("Missing gas budget");if(!u.payment)throw new Error("Missing gas payment");if(!u.price)throw new Error("Missing gas price");const l={sender:vr(o),expiration:a||{None:!0},gasData:{payment:u.payment,owner:vr(this.gasConfig.owner??o),price:BigInt(u.price),budget:BigInt(u.budget)},kind:{ProgrammableTransaction:{inputs:i,transactions:this.transactions}}};return I.TransactionData.serialize({V1:l},{maxSize:e}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return te.getDigestFromBytes(e)}snapshot(){return z(this,Ge)}}var sr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},T=(t,e,r)=>(sr(t,e,"read from private field"),r?r.call(t):e.get(t)),Q=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Fe=(t,e,r,n)=>(sr(t,e,"write to private field"),e.set(t,r),r),$=(t,e,r)=>(sr(t,e,"access private method"),r),b,Ae,He,Be,Xe,ce,ge,ar,cn,or,un,cr,ln,ur,dn,Qe,xt;const Ss={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function Ts(t){const e={kind:"Result",index:t},r=[],n=i=>r[i]??(r[i]={kind:"NestedResult",index:t,resultIndex:i});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,s){if(s in i)return Reflect.get(i,s);if(s===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof s=="symbol")return;const a=parseInt(s,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}function ks(t){const e=ir(t);return e?e.Struct.address==="0x2"&&e.Struct.module==="transfer"&&e.Struct.name==="Receiving":!1}function _e(t){if(!t.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}const hn=Symbol.for("@mysten/transaction"),mt={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},Es=1000n,xs=50,js=(t,e)=>Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e));function Is(t){return!!t&&typeof t=="object"&&t[hn]===!0}const jt=class{constructor(t){Q(this,Ae),Q(this,Be),Q(this,ce),Q(this,ar),Q(this,or),Q(this,cr),Q(this,ur),Q(this,Qe),Q(this,b,void 0),Fe(this,b,new te(t?t.blockData:void 0))}static fromKind(t){const e=new jt;return Fe(e,b,te.fromKindBytes(typeof t=="string"?J(t):t)),e}static from(t){const e=new jt;return typeof t!="string"||!t.startsWith("{")?Fe(e,b,te.fromBytes(typeof t=="string"?J(t):t)):Fe(e,b,te.restore(JSON.parse(t))),e}setSender(t){T(this,b).sender=t}setSenderIfNotSet(t){T(this,b).sender||(T(this,b).sender=t)}setExpiration(t){T(this,b).expiration=t}setGasPrice(t){T(this,b).gasConfig.price=String(t)}setGasBudget(t){T(this,b).gasConfig.budget=String(t)}setGasOwner(t){T(this,b).gasConfig.owner=t}setGasPayment(t){T(this,b).gasConfig.payment=t.map(e=>zr(e,oe))}get blockData(){return T(this,b).snapshot()}get[hn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Yi((t,e)=>zt(t)?$(this,Ae,He).call(this,"pure",{Pure:Array.from(t.toBytes())}):$(this,Ae,He).call(this,"pure",t instanceof Uint8Array?P.Pure(t):e?P.Pure(t,e):t))}),this.pure}get gas(){return{kind:"GasCoin"}}object(t){if(typeof t=="object"&&"kind"in t)return t;const e=wr(t),r=T(this,b).inputs.find(n=>n.type==="object"&&e===wr(n.value));return r&&_(r.value,kt)&&"Shared"in r.value.Object&&_(t,kt)&&"Shared"in t.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||t.Object.Shared.mutable),r??$(this,Ae,He).call(this,"object",typeof t=="string"?B(t):t)}objectRef(...t){return this.object(P.ObjectRef(...t))}receivingRef(...t){return this.object(P.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(P.SharedObjectRef(...t))}add(t){const e=T(this,b).transactions.push(t);return Ts(e-1)}splitCoins(t,e){return this.add(ue.SplitCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="number"||typeof r=="bigint"||typeof r=="string"?this.pure.u64(r):$(this,Be,Xe).call(this,r))))}mergeCoins(t,e){return this.add(ue.MergeCoins(typeof t=="string"?this.object(t):t,e.map(r=>typeof r=="string"?this.object(r):r)))}publish({modules:t,dependencies:e}){return this.add(ue.Publish({modules:t,dependencies:e}))}upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return this.add(ue.Upgrade({modules:t,dependencies:e,packageId:r,ticket:typeof n=="string"?this.object(n):n}))}moveCall({arguments:t,typeArguments:e,target:r}){return this.add(ue.MoveCall({arguments:t?.map(n=>$(this,Be,Xe).call(this,n)),typeArguments:e,target:r}))}transferObjects(t,e){return this.add(ue.TransferObjects(t.map(r=>typeof r=="string"?this.object(r):r),typeof e=="string"?this.pure.address(e):$(this,Be,Xe).call(this,e)))}makeMoveVec({type:t,objects:e}){return this.add(ue.MakeMoveVec({type:t,objects:e.map(r=>typeof r=="string"?this.object(r):r)}))}serialize(){return JSON.stringify(T(this,b).snapshot())}async sign(t){const{signer:e,...r}=t,n=await this.build(r);return e.signTransactionBlock(n)}async build(t={}){return await $(this,Qe,xt).call(this,t),T(this,b).build({maxSizeBytes:$(this,ce,ge).call(this,"maxTxSizeBytes",t),onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await $(this,Qe,xt).call(this,t),T(this,b).getDigest()}};let As=jt;b=new WeakMap;Ae=new WeakSet;He=function(t,e){const r=T(this,b).inputs.length,n=z({kind:"Input",value:typeof e=="bigint"?String(e):e,index:r,type:t},Ue);return T(this,b).inputs.push(n),n};Be=new WeakSet;Xe=function(t){return zt(t)?this.pure(t):t};ce=new WeakSet;ge=function(t,{protocolConfig:e,limits:r}){if(r&&typeof r[t]=="number")return r[t];if(!e)return Ss[t];const n=e?.attributes[mt[t]];if(!n)throw new Error(`Missing expected protocol config: "${mt[t]}"`);const i="u64"in n?n.u64:"u32"in n?n.u32:n.f64;if(!i)throw new Error(`Unexpected protocol config value found for: "${mt[t]}"`);return Number(i)};ar=new WeakSet;cn=function(t){const e=$(this,ce,ge).call(this,"maxPureArgumentSize",t);T(this,b).inputs.forEach((r,n)=>{if(_(r.value,it)&&r.value.Pure.length>e)throw new Error(`Input at index ${n} is too large, max pure input size is ${e} bytes, got ${r.value.Pure.length} bytes`)})};or=new WeakSet;un=async function(t){if(T(this,b).gasConfig.payment){const n=$(this,ce,ge).call(this,"maxGasObjects",t);if(T(this,b).gasConfig.payment.length>n)throw new Error(`Payment objects exceed maximum amount: ${n}`)}if(t.onlyTransactionKind||T(this,b).gasConfig.payment)return;const e=T(this,b).gasConfig.owner??T(this,b).sender,r=(await _e(t).getCoins({owner:e,coinType:zn})).data.filter(n=>!T(this,b).inputs.find(i=>_(i.value,st)&&"Object"in i.value&&"ImmOrOwned"in i.value.Object?n.coinObjectId===i.value.Object.ImmOrOwned.objectId:!1)).slice(0,$(this,ce,ge).call(this,"maxGasObjects",t)-1).map(n=>({objectId:n.coinObjectId,digest:n.digest,version:n.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(r)};cr=new WeakSet;ln=async function(t){t.onlyTransactionKind||T(this,b).gasConfig.price||this.setGasPrice(await _e(t).getReferenceGasPrice())};ur=new WeakSet;dn=async function(t){const{inputs:e,transactions:r}=T(this,b),n=[],i=[];if(e.forEach(s=>{if(s.type==="object"&&typeof s.value=="string"){i.push({id:B(s.value),input:s});return}}),r.forEach(s=>{if(s.kind==="MoveCall"&&s.arguments.some(a=>a.kind==="Input"&&!_(e[a.index].value,st))&&n.push(s),s.kind==="SplitCoins"&&s.amounts.forEach(a=>{if(a.kind==="Input"){const o=e[a.index];typeof o.value!="object"&&(o.value=P.Pure(I.U64.serialize(o.value)))}}),s.kind==="TransferObjects"&&s.address.kind==="Input"){const a=e[s.address.index];typeof a.value!="object"&&(a.value=P.Pure(I.Address.serialize(a.value)))}}),n.length&&await Promise.all(n.map(async s=>{const[a,o,u]=s.target.split("::"),l=await _e(t).getNormalizedMoveFunction({package:ae(a),module:o,function:u}),d=l.parameters.length>0&&hs(l.parameters.at(-1))?l.parameters.slice(0,l.parameters.length-1):l.parameters;if(d.length!==s.arguments.length)throw new Error("Incorrect number of arguments.");d.forEach((f,g)=>{const m=s.arguments[g];if(m.kind!=="Input")return;const v=e[m.index];if(_(v.value,st))return;const E=v.value,C=Et(f,E);if(C){v.value=P.Pure(E,C);return}if(ir(f)!=null||typeof f=="object"&&"TypeParameter"in f){if(typeof E!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(E,null,2)}`);i.push({id:E,input:v,normalizedType:f});return}throw new Error(`Unknown call arg type ${JSON.stringify(f,null,2)} for value ${JSON.stringify(E,null,2)}`)})})),i.length){const s=[...new Set(i.map(({id:d})=>d))],a=js(s,xs),o=(await Promise.all(a.map(d=>_e(t).multiGetObjects({ids:d,options:{showOwner:!0}})))).flat();let u=new Map(s.map((d,f)=>[d,o[f]]));const l=Array.from(u).filter(([d,f])=>f.error).map(([d,f])=>d);if(l.length)throw new Error(`The following input objects are invalid: ${l.join(", ")}`);i.forEach(({id:d,input:f,normalizedType:g})=>{var m;const v=u.get(d),E=(m=v.data)==null?void 0:m.owner,C=E&&typeof E=="object"&&"Shared"in E?E.Shared.initial_shared_version:void 0;if(C){const q=g!=null&&Tt(g)==null&&Yr(g)==null,Tn=Qi(f.value)||q||g!=null&&Tt(g)!=null;f.value=P.SharedObjectRef({objectId:d,initialSharedVersion:C,mutable:Tn})}else g&&ks(g)?f.value=P.ReceivingRef(yr(v)):f.value=P.ObjectRef(yr(v))})}};Qe=new WeakSet;xt=async function(t){if(!t.onlyTransactionKind&&!T(this,b).sender)throw new Error("Missing transaction sender");if(!t.protocolConfig&&!t.limits&&t.client&&(t.protocolConfig=await t.client.getProtocolConfig()),await Promise.all([$(this,cr,ln).call(this,t),$(this,ur,dn).call(this,t)]),!t.onlyTransactionKind&&(await $(this,or,un).call(this,t),!T(this,b).gasConfig.budget)){const e=await _e(t).dryRunTransactionBlock({transactionBlock:T(this,b).build({maxSizeBytes:$(this,ce,ge).call(this,"maxTxSizeBytes",t),overrides:{gasConfig:{budget:String($(this,ce,ge).call(this,"maxTxGas",t)),payment:[]}}})});if(e.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${e.effects.status.error}`,{cause:e});const r=Es*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(e.effects.gasUsed.computationCost)+r,i=n+BigInt(e.effects.gasUsed.storageCost)-BigInt(e.effects.gasUsed.storageRebate);this.setGasBudget(i>n?i:n)}$(this,ar,cn).call(this,t)};const Bs=Symbol.for("@mysten/SuiClient");class Os{get[Bs](){return!0}constructor(e){this.transport=e.transport??new gi({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!se(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!se(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!se(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!se(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!se(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!We(ae(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(r=>{if(!r||!We(ae(r)))throw new Error(`Invalid Sui Object id ${r}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!gr(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(r=>{if(!gr(r))throw new Error(`Invalid Transaction digest ${r}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:U(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:e,signer:r,...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));const{signature:s,bytes:a}=await r.signTransactionBlock(i);return this.executeTransactionBlock({transactionBlock:a,signature:s,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!se(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!We(ae(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var r;let n;if(Is(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=U(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=U(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(r=e.gasPrice)==null?void 0:r.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:U(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!We(ae(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=ot(e.digest);return me(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames(e){return await this.transport.request({method:"suix_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]})}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransactionBlock({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...i}){const s=AbortSignal.timeout(r),a=new Promise((o,u)=>{s.addEventListener("abort",()=>u(s.reason))});for(a.catch(()=>{});!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(o=>setTimeout(o,n)),a])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class pn extends Mn{}const lr="Sui",fn=t=>{var e;const r=(e=t.data)==null?void 0:e.content;return r&&r.dataType==="moveObject"?r.fields:null},ba=(t,e)=>{try{return fr(t)===fr(e)}catch{return!1}},va=t=>t?.type==="created",Sa=t=>t?.type==="published";function $s(t){return Array.isArray(t)}function dr(t){return!Array.isArray(t)&&typeof t=="object"&&"fields"in t&&"type"in t}function Cs(t){return typeof t=="object"&&!$s(t)&&!dr(t)}function Ta(t){return typeof t=="object"&&"id"in t}const Ms=16*1024,ka=t=>I.ser("vector<u8>",t,{maxSize:Ms}).toBytes(),Ea=async(t,e)=>{const{data:r,error:n}=await t.getObject({id:e,options:{showContent:!0}});if(n)throw new Error("Error getting object: "+n);if(!r||!dr(r.content))throw new Error(`Cannot get oject for state id ${e}: `+r);return kn(r.content.type)},zs=async(t,e)=>{if(!se(e))throw new Error(`Invalid object ID: ${e}`);const r=await t.getObject({id:e,options:{showContent:!0}});return fn(r)},xa=async(t,e)=>{let r,n;do{const a=await t.getDynamicFields({parentId:e,cursor:n});r=a.data.find(o=>o.name.type.endsWith("CurrentPackage")),n=a.hasNextPage?a.nextCursor:null}while(n&&!r);if(!r)throw new Error("CurrentPackage not found");const i=await t.getObject({id:r.objectId,options:{showContent:!0}}),s=fn(i);if(!s||!Cs(s))throw new Error("Unable to get fields from object response");if(!("value"in s)||!dr(s.value))throw new Error("Unable to get package id");return s.value.fields.package},ja=async(t,e,r)=>{let n=null,i=null,s=null,a;do{if(s=await t.getOwnedObjects({owner:r,filter:{StructType:`${e}::emitter::EmitterCap`},options:{showContent:!0},cursor:a}),!s||!s.data)throw Error("Failed to get owned objects");for(const o of s.data){if(!o.data)continue;const{version:u,objectId:l}=o.data;(n===null||u<n)&&(n=u,i=l)}a=s.hasNextPage?s.nextCursor:void 0}while(a);return i},Ia=async(t,e)=>{const r=new As,[n]=r.publish({modules:t.modules.map(i=>Array.from(En.decode(i))),dependencies:t.dependencies.map(i=>ae(i))});return r.transferObjects([n],r.pure(e)),r},gn=class he extends xn{constructor(e,r){super(e,r??jn(e,he._platform))}getRpc(e){if(e in this.config)return new Os({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new pn(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,r){if(!he.isSupportedChain(r))throw new Error(`invalid chain for ${lr}: ${r}`);return In.tokenId(r,An)}static isNativeTokenId(e,r,n){return!he.isSupportedChain(r)||n.chain!==r?!1:this.nativeTokenId(e,r)===n}static isSupportedChain(e){return Bn(e)===he._platform}static async getDecimals(e,r,n){if(ut(n))return On(he._platform);const i=new Je(n);try{const a=await zs(r,i.toString());if(a&&"decimals"in a)return a.decimals}catch{}const s=await r.getCoinMetadata({coinType:i.toString()});if(s===null)throw new Error(`Can't fetch decimals for token ${i.toString()}`);return s.decimals}static async getCoins(e,r,n){let i=[],s=null;const a=new Je(r).toString();do{const o=await e.getCoins({owner:a,coinType:n,cursor:s});i=[...i,...o.data],s=o.hasNextPage?o.nextCursor:null}while(s);return i}static async getBalance(e,r,n,i){if(ut(i)){const{totalBalance:a}=await r.getBalance({owner:n});return BigInt(a)}const{totalBalance:s}=await r.getBalance({owner:n,coinType:i.toString()});return BigInt(s)}static async getBalances(e,r,n,i){return(await Promise.all(i.map(async s=>{const a=await this.getBalance(e,r,n,s);return{[ut(s)?"native":new Je(s).toString()]:a}}))).reduce((s,a)=>Object.assign(s,a),{})}static async sendWait(e,r,n){const i=[];for(const s of n){const a=await r.executeTransactionBlock(s);await r.waitForTransactionBlock({digest:a.digest}),i.push(a.digest)}return i}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(e){const r=$n(he._platform,e);if(r===void 0)throw new Error(`Unknown native chain id ${e}`);const[n,i]=r;return[n,i]}static async chainFromRpc(e){const r=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(r)}};Ee(gn,"_platform",lr);let It=gn;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.bech32m=At=Ne.bech32=void 0;const at="qpzry9x8gf2tvdw0s3jn54khce6mua7l",mn={};for(let t=0;t<at.length;t++){const e=at.charAt(t);mn[e]=t}function Te(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Sr(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Te(e)^n>>5}e=Te(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=Te(e)^n&31}return e}function hr(t,e,r,n){let i=0,s=0;const a=(1<<r)-1,o=[];for(let u=0;u<t.length;++u)for(i=i<<e|t[u],s+=e;s>=r;)s-=r,o.push(i>>s&a);if(n)s>0&&o.push(i<<r-s&a);else{if(s>=e)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function Ps(t){return hr(t,8,5,!0)}function Us(t){const e=hr(t,5,8,!1);if(Array.isArray(e))return e}function _s(t){const e=hr(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function yn(t){let e;t==="bech32"?e=1:e=734539939;function r(a,o,u){if(u=u||90,a.length+7+o.length>u)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let l=Sr(a);if(typeof l=="string")throw new Error(l);let d=a+"1";for(let f=0;f<o.length;++f){const g=o[f];if(g>>5)throw new Error("Non 5-bit word");l=Te(l)^g,d+=at.charAt(g)}for(let f=0;f<6;++f)l=Te(l);l^=e;for(let f=0;f<6;++f){const g=l>>(5-f)*5&31;d+=at.charAt(g)}return d}function n(a,o){if(o=o||90,a.length<8)return a+" too short";if(a.length>o)return"Exceeds length limit";const u=a.toLowerCase(),l=a.toUpperCase();if(a!==u&&a!==l)return"Mixed-case string "+a;a=u;const d=a.lastIndexOf("1");if(d===-1)return"No separator character for "+a;if(d===0)return"Missing prefix for "+a;const f=a.slice(0,d),g=a.slice(d+1);if(g.length<6)return"Data too short";let m=Sr(f);if(typeof m=="string")return m;const v=[];for(let E=0;E<g.length;++E){const C=g.charAt(E),q=mn[C];if(q===void 0)return"Unknown character "+C;m=Te(m)^q,!(E+6>=g.length)&&v.push(q)}return m!==e?"Invalid checksum for "+a:{prefix:f,words:v}}function i(a,o){const u=n(a,o);if(typeof u=="object")return u}function s(a,o){const u=n(a,o);if(typeof u=="object")return u;throw new Error(u)}return{decodeUnsafe:i,decode:s,encode:r,toWords:Ps,fromWordsUnsafe:Us,fromWords:_s}}var At=Ne.bech32=yn("bech32");Ne.bech32m=yn("bech32m");var Re=(t=>(t[t.TransactionData=0]="TransactionData",t[t.TransactionEffects=1]="TransactionEffects",t[t.CheckpointSummary=2]="CheckpointSummary",t[t.PersonalMessage=3]="PersonalMessage",t))(Re||{});function Ns(t){return[t,0,0]}function wn(t,e){const r=Ns(t),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}const ct={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Rs={ED25519:32,Secp256k1:33,Secp256r1:33},Vs={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function Ds(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function qs(t,e){const r=t.toString(16);return Un(r.padStart(e*2,"0").slice(-e*2))}function Ws(t,e){const r=qs(t,e),n=Ds(r);return n===-1?new Uint8Array([0]):r.slice(n)}function Ks(t,e){const r=Ws(t,32);e==="accounts.google.com"&&(e="https://accounts.google.com");const n=new TextEncoder().encode(e),i=new Uint8Array(2+r.length+n.length);return i.set([ct.ZkLogin]),i.set([n.length],1),i.set(n,2),i.set(r,2+n.length),B(jr(Ce(i,{dkLen:32})).slice(0,Ot*2))}function Ls(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(e===-1)throw new Error("Invalid base64Url character: "+t);const r=e.toString(2).padStart(6,"0");return Array.from(r).map(Number)}function Gs(t){let e=[];for(let r=0;r<t.length;r++){const n=t.charAt(r),i=Ls(n);e=e.concat(i)}return e}function Fs(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=Gs(t);const n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const i=(e+t.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");const s=new Uint8Array(Math.floor(r.length/8));let a=0;for(let o=0;o<r.length;o+=8){const u=r.slice(o,o+8),l=parseInt(u.join(""),2);s[a++]=l}return new TextDecoder().decode(s)}function Js(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const r=Object.keys(e)[0];return[r,e[r]]}function Zs(t,e){const r=Fs(t.value,t.indexMod4),[n,i]=Js(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return i}const Hs=c.struct("ZkLoginSignature",{inputs:c.struct("ZkLoginSignatureInputs",{proofPoints:c.struct("ZkLoginSignatureInputsProofPoints",{a:c.vector(c.string()),b:c.vector(c.vector(c.string())),c:c.vector(c.string())}),issBase64Details:c.struct("ZkLoginSignatureInputsClaim",{value:c.string(),indexMod4:c.u8()}),headerBase64:c.string(),addressSeed:c.string()}),maxEpoch:c.u64(),userSignature:c.vector(c.u8())});function Xs(t){return Hs.parse(typeof t=="string"?J(t):t)}function Qs({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),i=new Uint8Array(1+t.length+n.length);return i.set([ct[e]]),i.set(t,1),i.set(n,1+t.length),U(i)}function Ys(t){const e=J(t),r=Vs[e[0]];switch(r){case"MultiSig":const n=I.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":const i=e.slice(1),{inputs:s,maxEpoch:a,userSignature:o}=Xs(i),{issBase64Details:u,addressSeed:l}=s,d=Zs(u,"iss"),f=Ks(BigInt(l),d);return{serializedSignature:t,signatureScheme:r,zkLogin:{inputs:s,maxEpoch:a,userSignature:o,iss:d,address:f,addressSeed:BigInt(l)},signature:e};case"ED25519":case"Secp256k1":case"Secp256r1":const g=Rs[r],m=e.slice(1,e.length-g),v=e.slice(1+m.length);return{serializedSignature:t,signatureScheme:r,signature:m,publicKey:v,bytes:e};default:throw new Error("Unsupported signature scheme")}}const Ye=32,ea="suiprivkey";class ta{async signWithIntent(e,r){const n=wn(r,e),i=Ce(n,{dkLen:32});return{signature:Qs({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:U(e)}}async signTransactionBlock(e){return this.signWithIntent(e,Re.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(c.vector(c.u8()).serialize(e).toBytes(),Re.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class ra extends ta{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function na(t,e){if(t.length!==Ye)throw new Error("Invalid bytes length");const r=ct[e],n=new Uint8Array(t.length+1);return n.set([r]),n.set(t,1),At.encode(ea,At.toWords(n))}function Tr(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function ia(t){return ii(t,"")}function sa(t){return me(ia(t))}const aa="ed25519 seed",oa=2147483648,ca=new RegExp("^m(\\/[0-9]+')+$"),bn=t=>t.replace("'",""),ua=t=>{const e=xr.create($t,aa).update(De(t)).digest(),r=e.slice(0,32),n=e.slice(32);return{key:r,chainCode:n}},la=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(1+t.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(t,1),i.set(new Uint8Array(n,0,n.byteLength),t.length+1);const s=xr.create($t,e).update(i).digest(),a=s.slice(0,32),o=s.slice(32);return{key:a,chainCode:o}},da=t=>ca.test(t)?!t.split("/").slice(1).map(bn).some(isNaN):!1,kr=(t,e,r=oa)=>{if(!da(t))throw new Error("Invalid derivation path");const{key:n,chainCode:i}=ua(e);return t.split("/").slice(1).map(bn).map(s=>parseInt(s,10)).reduce((s,a)=>la(s,a+r),{key:n,chainCode:i})};function vn(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class ha{equals(e){return vn(this.toRawBytes(),e.toRawBytes())}toBase64(){return U(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return U(e)}verifyWithIntent(e,r,n){const i=wn(n,e),s=Ce(i,{dkLen:32});return this.verify(s,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(I.vector(I.u8()).serialize(e).toBytes(),r,Re.PersonalMessage)}verifyTransactionBlock(e,r){return this.verifyWithIntent(e,r,Re.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return B(jr(Ce(this.toSuiBytes(),{dkLen:32})).slice(0,Ot*2))}}const Bt=32;class Sn extends ha{constructor(e){if(super(),typeof e=="string"?this.data=J(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==Bt)throw new Error(`Invalid public key input. Expected ${Bt} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return ct.ED25519}async verify(e,r){let n;if(typeof r=="string"){const i=Ys(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!vn(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return le.sign.detached.verify(e,n,this.toRawBytes())}}Sn.SIZE=Bt;const Er="m/44'/784'/0'/0'/0'";class we extends ra{constructor(e){super(),e?this.keypair=e:this.keypair=le.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new we(le.sign.keyPair())}static fromSecretKey(e,r){const n=e.length;if(n!==Ye)throw new Error(`Wrong secretKey size. Expected ${Ye} bytes, got ${n}.`);const i=le.sign.keyPair.fromSeed(e);if(!r||!r.skipValidation){const s=new TextEncoder().encode("sui validation"),a=le.sign.detached(s,i.secretKey);if(!le.sign.detached.verify(s,a,i.publicKey))throw new Error("provided secretKey is invalid")}return new we(i)}getPublicKey(){return new Sn(this.keypair.publicKey)}getSecretKey(){return na(this.keypair.secretKey.slice(0,Ye),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return le.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,r){if(r==null&&(r=Er),!Tr(r))throw new Error("Invalid derivation path");const{key:n}=kr(r,sa(e));return we.fromSecretKey(n)}static deriveKeypairFromSeed(e,r){if(r==null&&(r=Er),!Tr(r))throw new Error("Invalid derivation path");const{key:n}=kr(r,e);return we.fromSecretKey(n)}}async function pa(t,e){const[,r]=await It.chainFromRpc(t);return new fa(r,t,we.deriveKeypair(e,"m/44'/784'/0'/0'/0'"))}class fa{constructor(e,r,n,i){Ee(this,"_chain"),Ee(this,"_client"),Ee(this,"_signer"),Ee(this,"_debug"),this._chain=e,this._client=r,this._signer=n,this._debug=i}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const r=[];for(const n of e){const{description:i,transaction:s}=n;this._debug&&console.log(`Signing ${i} for ${this.address()}`);try{const a=await this._client.signAndExecuteTransactionBlock({transactionBlock:s,signer:this._signer});r.push(a.digest)}catch(a){throw a}}return r}}const ga={Address:Je,Platform:It,getSigner:pa,protocols:{WormholeCore:()=>pr(()=>import("./index-CFG8Auhr.js"),__vite__mapDeps([0,1,2,3,4])),TokenBridge:()=>pr(()=>import("./index-D1fzB2pJ.js"),__vite__mapDeps([5,1,2,3,0,4]))},getChain:(t,e,r)=>new pn(e,new It(t,Cn(t,lr,{[e]:r})))},Aa=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"}));export{It as S,fn as a,dr as b,Sa as c,va as d,ba as e,ja as f,zs as g,xa as h,Cs as i,Ea as j,Ta as k,Ia as p,Aa as s,ka as u};
