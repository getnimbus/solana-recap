import{by as L,bz as W,bA as N,cf as V,bF as v,bH as z,bI as w,bJ as F,bK as x,bL as A,bN as _,cp as Y,cq as B,bT as H,bV as S,c0 as M,ck as q,cd as g,cr as k,bO as D,bR as G,cs as Q,ct as m,cu as j,cv as I,c5 as h,bD as J,cw as K,cx as R,c7 as f,c8 as T,cy as X,c9 as y,ca as Z,bZ as O,c4 as P,bE as U,bG as $,bM as ee,c6 as te}from"./index.js";function se(l){let e,t,s,o,i,c,d,a;return{c(){e=h("div"),t=h("img"),o=J(),i=h("div"),i.textContent="Connect TON",K(t.src,s=R)||f(t,"src",s),f(t,"alt",""),f(t,"class","h-[22px] w-[24px] svelte-1330zdt"),f(i,"class","font-medium text-base svelte-1330zdt"),f(e,"class",c=T(`flex items-center justify-center gap-3 text-white border cursor-pointer rounded-[12px] w-[219px] h-[46px] ${l[1]?"border-white text-white":"border-[#27326f] text-[#27326f]"}`)+" svelte-1330zdt"),X(e,"padding","9px 21px 11px")},m(r,b){v(r,e,b),y(e,t),y(e,o),y(e,i),d||(a=Z(e,"click",l[2]),d=!0)},p(r,b){b&2&&c!==(c=T(`flex items-center justify-center gap-3 text-white border cursor-pointer rounded-[12px] w-[219px] h-[46px] ${r[1]?"border-white text-white":"border-[#27326f] text-[#27326f]"}`)+" svelte-1330zdt")&&f(e,"class",c)},i:O,o:O,d(r){r&&A(e),d=!1,a()}}}function ne(l){let e,t;return e=new P({props:{$$slots:{default:[ae]},$$scope:{ctx:l}}}),e.$on("click",l[2]),{c(){U(e.$$.fragment)},m(s,o){$(e,s,o),t=!0},p(s,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function ae(l){let e;return{c(){e=te("Connect TON")},m(t,s){v(t,e,s)},d(t){t&&A(e)}}}function ce(l){let e,t,s,o;const i=[ne,se],c=[];function d(a,r){return a[0]?0:1}return e=d(l),t=c[e]=i[e](l),{c(){t.c(),s=V()},m(a,r){c[e].m(a,r),v(a,s,r),o=!0},p(a,[r]){let b=e;e=d(a),e===b?c[e].p(a,r):(z(),w(c[b],1,1,()=>{c[b]=null}),F(),t=c[e],t?t.p(a,r):(t=c[e]=i[e](a),t.c()),x(t,1),t.m(s.parentNode,s))},i(a){o||(x(t),o=!0)},o(a){w(t),o=!1},d(a){a&&A(s),c[e].d(a)}}}function oe(l,e,t){let s,o,i;_(l,Y,n=>t(5,s=n)),_(l,B,n=>t(6,o=n)),_(l,H,n=>t(1,i=n));let{selectYourWalletsBundle:c}=e,{closeMobileAddAccountModal:d=()=>{}}=e,{isFromHero:a=!1}=e;const r=S(),b=async()=>{M.track("user_login_ton"),s?.connected&&s.disconnect(),C()},C=async()=>{try{s.openModal(),s.onStatusChange(n=>{E(n)})}catch{s?.connected&&s.disconnect()}},E=async n=>{try{if(n&&n?.account?.address){const u={id:n?.account?.address,label:`TON Wallet ${q(n?.account?.address)}`,value:n?.account?.address};if(c&&c.length!==0&&(await g.put("/address/personalize/bundle?name=Your wallets",{name:"Your wallets",addresses:c?.concat([u.value])}),r.invalidateQueries(["list-bundle"])),(await g.post("/accounts",{type:"DEX",publicAddress:u.value,accountId:u.value,label:u.label}))?.error){k("Can't add new wallet address at this time!","fail");return}r.invalidateQueries(["list-address"]),D.update(p=>p=u.value),G.update(p=>p="ALL"),Q.update(p=>p="MOVE"),m.sync.set({selectedChain:"ALL"}),m.sync.set({typeWalletAddress:"MOVE"}),m.sync.set({selectedWallet:u.value}),j.includes("MOVE")&&window.history.replaceState(null,"",window.location.pathname+`?tab=${o}&type=MOVE&chain=ALL&address=${u.value}`),I.includes("MOVE")&&window.history.replaceState(null,"",window.location.pathname+`?tab=${o}&type=MOVE&address=${u.value}`),d(),s?.connected&&s.disconnect(),k("Successfully add TON account!","success"),M.track("user_add_address")}}catch(u){console.error(u)}};return l.$$set=n=>{"selectYourWalletsBundle"in n&&t(3,c=n.selectYourWalletsBundle),"closeMobileAddAccountModal"in n&&t(4,d=n.closeMobileAddAccountModal),"isFromHero"in n&&t(0,a=n.isFromHero)},[a,i,b,c,d]}class ie extends L{constructor(e){super(),W(this,e,oe,ce,N,{selectYourWalletsBundle:3,closeMobileAddAccountModal:4,isFromHero:0})}}export{ie as T};
