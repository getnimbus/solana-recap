{"version":3,"file":"ccip-DSfOJChg.js","sources":["../../node_modules/@wormhole-foundation/wormhole-connect/lib/ccip-DSfOJChg.mjs"],"sourcesContent":["import { B as l, g as w, s as y, i as p, I as h, d as g, c as k, a as O, b as L, H as m, f as E } from \"./evm-mqOA6aXy.mjs\";\nclass x extends l {\n  constructor({ callbackSelector: e, cause: a, data: o, extraData: c, sender: d, urls: r }) {\n    var i;\n    super(a.shortMessage || \"An error occurred while fetching for an offchain result.\", {\n      cause: a,\n      metaMessages: [\n        ...a.metaMessages || [],\n        (i = a.metaMessages) != null && i.length ? \"\" : [],\n        \"Offchain Gateway Call:\",\n        r && [\n          \"  Gateway URL(s):\",\n          ...r.map((u) => `    ${w(u)}`)\n        ],\n        `  Sender: ${d}`,\n        `  Data: ${o}`,\n        `  Callback selector: ${e}`,\n        `  Extra data: ${c}`\n      ].flat()\n    }), Object.defineProperty(this, \"name\", {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: \"OffchainLookupError\"\n    });\n  }\n}\nclass M extends l {\n  constructor({ result: e, url: a }) {\n    super(\"Offchain gateway response is malformed. Response data must be a hex value.\", {\n      metaMessages: [\n        `Gateway URL: ${w(a)}`,\n        `Response: ${y(e)}`\n      ]\n    }), Object.defineProperty(this, \"name\", {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: \"OffchainLookupResponseMalformedError\"\n    });\n  }\n}\nclass R extends l {\n  constructor({ sender: e, to: a }) {\n    super(\"Reverted sender address does not match target contract address (`to`).\", {\n      metaMessages: [\n        `Contract address: ${a}`,\n        `OffchainLookup sender address: ${e}`\n      ]\n    }), Object.defineProperty(this, \"name\", {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: \"OffchainLookupSenderMismatchError\"\n    });\n  }\n}\nfunction $(n, e) {\n  if (!p(n))\n    throw new h({ address: n });\n  if (!p(e))\n    throw new h({ address: e });\n  return n.toLowerCase() === e.toLowerCase();\n}\nconst C = \"0x556f1830\", S = {\n  name: \"OffchainLookup\",\n  type: \"error\",\n  inputs: [\n    {\n      name: \"sender\",\n      type: \"address\"\n    },\n    {\n      name: \"urls\",\n      type: \"string[]\"\n    },\n    {\n      name: \"callData\",\n      type: \"bytes\"\n    },\n    {\n      name: \"callbackFunction\",\n      type: \"bytes4\"\n    },\n    {\n      name: \"extraData\",\n      type: \"bytes\"\n    }\n  ]\n};\nasync function P(n, { blockNumber: e, blockTag: a, data: o, to: c }) {\n  const { args: d } = g({\n    data: o,\n    abi: [S]\n  }), [r, i, u, t, s] = d;\n  try {\n    if (!$(c, r))\n      throw new R({ sender: r, to: c });\n    const f = await A({ data: u, sender: r, urls: i }), { data: b } = await k(n, {\n      blockNumber: e,\n      blockTag: a,\n      data: O([\n        t,\n        L([{ type: \"bytes\" }, { type: \"bytes\" }], [f, s])\n      ]),\n      to: c\n    });\n    return b;\n  } catch (f) {\n    throw new x({\n      callbackSelector: t,\n      cause: f,\n      data: o,\n      extraData: s,\n      sender: r,\n      urls: i\n    });\n  }\n}\nasync function A({ data: n, sender: e, urls: a }) {\n  var c;\n  let o = new Error(\"An unknown error occurred.\");\n  for (let d = 0; d < a.length; d++) {\n    const r = a[d], i = r.includes(\"{data}\") ? \"GET\" : \"POST\", u = i === \"POST\" ? { data: n, sender: e } : void 0;\n    try {\n      const t = await fetch(r.replace(\"{sender}\", e).replace(\"{data}\", n), {\n        body: JSON.stringify(u),\n        method: i\n      });\n      let s;\n      if ((c = t.headers.get(\"Content-Type\")) != null && c.startsWith(\"application/json\") ? s = (await t.json()).data : s = await t.text(), !t.ok) {\n        o = new m({\n          body: u,\n          details: s != null && s.error ? y(s.error) : t.statusText,\n          headers: t.headers,\n          status: t.status,\n          url: r\n        });\n        continue;\n      }\n      if (!E(s)) {\n        o = new M({\n          result: s,\n          url: r\n        });\n        continue;\n      }\n      return s;\n    } catch (t) {\n      o = new m({\n        body: u,\n        details: t.message,\n        url: r\n      });\n    }\n  }\n  throw o;\n}\nexport {\n  A as ccipFetch,\n  P as offchainLookup,\n  S as offchainLookupAbiItem,\n  C as offchainLookupSignature\n};\n"],"names":["x","l","o","c","r","i","u","w","M","y","R","$","n","p","h","C","S","P","g","t","s","f","A","b","k","O","L","m","E"],"mappings":"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","x_google_ignoreList":[0]}